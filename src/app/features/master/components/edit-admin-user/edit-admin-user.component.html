<div class="form-card">
  <div class="form-title">管理者ユーザー編集</div>
  <form [formGroup]="editForm" (ngSubmit)="onSubmit()">
    <div *ngIf="errorMsg" class="error-message">{{ errorMsg }}</div>
    <label for="userId">ユーザーID</label>
    <input id="userId" type="text" formControlName="userId"  />

    <label for="displayName">氏名 <span style="color:#d32f2f">*</span></label>
    <input id="displayName" type="text" formControlName="displayName" [class.invalid]="editForm.get('displayName')?.invalid && editForm.get('displayName')?.touched" />
    <div *ngIf="editForm.get('displayName')?.invalid && editForm.get('displayName')?.touched" class="error-message">氏名は必須です</div>

    <label for="email">メールアドレス <span style="color:#d32f2f">*</span></label>
    <input id="email" type="email" formControlName="email" [class.invalid]="editForm.get('email')?.invalid && editForm.get('email')?.touched" />
    <div *ngIf="editForm.get('email')?.invalid && editForm.get('email')?.touched" class="error-message">有効なメールアドレスを入力してください</div>

    <label for="initialPassword">初期パスワード</label>
    <input id="initialPassword" type="text" formControlName="initialPassword" [disabled]="isRegistered" />
    <div *ngIf="isRegistered" style="color:#888; font-size:0.92em; margin-bottom:0.7em;">本登録済みのユーザーは<br>初期パスワードを変更できません</div>
    <div *ngIf="!isRegistered" style="color:#888; font-size:0.92em; margin-bottom:0.7em;">未登録ユーザーは<br>初期パスワードを変更できます</div>

    <button type="submit" [disabled]="loading">保存</button>
    <button type="button" class="delete-btn" [disabled]="loading" (click)="onCancel()" style="margin-top:0.5em;">キャンセル</button>
  </form>
</div>
