<div class="standard-monthly-form-container">
  <h2>標準報酬月額 定時決定 一括登録</h2>
  <div class="company-info-block" *ngIf="companyDisplayId && companyName">
    <div>企業ID：{{ companyDisplayId }}</div>
    <div>企業名：{{ companyName }}</div>
  </div>
  <form (ngSubmit)="$event.preventDefault()">
    <div class="form-row">
      <label>支社</label>
      <select [(ngModel)]="selectedOfficeId" name="office">
        <option value="">全支社</option>
        <option *ngFor="let office of offices" [value]="office.id">{{ office.name }}</option>
      </select>
      <label>従業員区分</label>
      <select [(ngModel)]="selectedEmployeeType" name="employeeType">
        <option value="">全従業員</option>
        <option value="regular">正社員</option>
        <option value="part">パート</option>
      </select>
    </div>
    <div class="form-row">
      <label>適用開始年</label>
      <select [(ngModel)]="startYear" name="startYear">
        <option *ngFor="let y of [2024,2025,2026]" [value]="y">{{ y }}年</option>
      </select>
      <label>適用開始月</label>
      <select [(ngModel)]="startMonth" name="startMonth">
        <option *ngFor="let m of [1,2,3,4,5,6,7,8,9,10,11,12]" [value]="m">{{ m }}月</option>
      </select>
    </div>
    <div class="form-row">
      <label>算出根拠：支給年月（開始）</label>
      <select [(ngModel)]="salaryFromYear" name="salaryFromYear">
        <option *ngFor="let y of [2024,2025,2026]" [value]="y">{{ y }}年</option>
      </select>
      <select [(ngModel)]="salaryFromMonth" name="salaryFromMonth">
        <option *ngFor="let m of [1,2,3,4,5,6,7,8,9,10,11,12]" [value]="m">{{ m }}月</option>
      </select>
      <span>～</span>
      <select [(ngModel)]="salaryToYear" name="salaryToYear">
        <option *ngFor="let y of [2024,2025,2026]" [value]="y">{{ y }}年</option>
      </select>
      <select [(ngModel)]="salaryToMonth" name="salaryToMonth">
        <option *ngFor="let m of [1,2,3,4,5,6,7,8,9,10,11,12]" [value]="m">{{ m }}月</option>
      </select>
    </div>
    <div class="form-actions">
      <button type="button" (click)="onDecision()">決定</button>
    </div>
  </form>

  <div *ngIf="resultList && resultList.length > 0" class="result-table-block">
    <h3>判定結果一覧</h3>
    <table class="result-table">
      <thead>
        <tr>
          <th>従業員名</th>
          <th>現等級</th>
          <th>現月額</th>
          <th>対象期間<br>給与合計</th>
          <th>平均</th>
          <th>健康保険<br>等級</th>
          <th>健康保険<br>新月額</th>
          <th>厚生年金<br>等級</th>
          <th>厚生年金<br>新月額</th>
          <th>適用開始日</th>
          <th>修正</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of resultList; let i = index">
          <td>{{ row.employeeName }}</td>
          <td>{{ row.currentGrade }}</td>
          <td>{{ row.currentMonthly | currency:'JPY':'symbol':'1.0-0' }}</td>
          <td>{{ row.salaryTotal | currency:'JPY':'symbol':'1.0-0' }}</td>
          <td>{{ row.salaryAvg | currency:'JPY':'symbol':'1.0-0' }}</td>
          <td>
            <input [(ngModel)]="row.judgedGrade" name="judgedGrade{{i}}" style="width: 60px;">
          </td>
          <td>
            <input [(ngModel)]="row.judgedMonthly" name="judgedMonthly{{i}}" style="width: 100px;">
          </td>
          <td>
            <input [(ngModel)]="row.pensionJudgedGrade" name="pensionJudgedGrade{{i}}" style="width: 60px;">
          </td>
          <td>
            <input [(ngModel)]="row.pensionJudgedMonthly" name="pensionJudgedMonthly{{i}}" style="width: 100px;">
          </td>
          <td>{{ startYear }}年{{ startMonth }}月</td>
          <td>
            <button type="button" (click)="onEditRow(i)">修正</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="form-actions">
      <button type="button" (click)="onSave()">保存</button>
    </div>
  </div>
</div>
